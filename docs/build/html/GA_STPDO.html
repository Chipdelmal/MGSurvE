<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>13. Discrete GA in a Realistic Landscape &mdash; MGSurvE  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Visualizing Traps’ Kernels" href="TrapsKernels.html" />
    <link rel="prev" title="12. GA Discrete Optimization" href="GA_discrete.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MGSurvE
              <img src="_static/MGSurvE_Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="breakdown.html">Pkg Breakdown</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="demos.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Quickstart.html">1. Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="landscapeCreation.html">2. Landscape Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="landscapeUpdate.html">3. Landscape Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="landscapeTraps.html">4. Sites and Trap Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="GA.html">5. GA Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="GA_custom.html">6. GA with Immovable Traps</a></li>
<li class="toctree-l2"><a class="reference internal" href="GA_sites.html">7. GA Custom with Multi-Point Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="GA_complex.html">8. GA with Sex Kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="OT_trapMask.html">9. Stage-Specific Traps</a></li>
<li class="toctree-l2"><a class="reference internal" href="GA_STP.html">10. GA in a Realistic Landscape</a></li>
<li class="toctree-l2"><a class="reference internal" href="PSO.html">11. Particle-Swarm Optimization (PSO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="GA_discrete.html">12. GA Discrete Optimization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">13. Discrete GA in a Realistic Landscape</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-landscape-up">13.1. Setting Landscape Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-ga-up">13.2. Setting GA Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="#result">13.3. Result</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="TrapsKernels.html">Visualizing Traps’ Kernels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MGSurvE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="demos.html">Tutorials</a></li>
      <li class="breadcrumb-item active"><span class="section-number">13. </span>Discrete GA in a Realistic Landscape</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/GA_STPDO.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="discrete-ga-in-a-realistic-landscape">
<h1><span class="section-number">13. </span>Discrete GA in a Realistic Landscape<a class="headerlink" href="#discrete-ga-in-a-realistic-landscape" title="Permalink to this heading"></a></h1>
<p>In this example, we will compare the results obtained in our <a class="reference external" href="https://chipdelmal.github.io/MGSurvE/build/html/GA_STP.html">realistic landscape continuous optimization demo</a> with the optimization done in a discrete-based setting.</p>
<section id="setting-landscape-up">
<h2><span class="section-number">13.1. </span>Setting Landscape Up<a class="headerlink" href="#setting-landscape-up" title="Permalink to this heading"></a></h2>
<p>The first thing we need to do is to generate our traps dataframe with its <code class="code docutils literal notranslate"><span class="pre">sid</span></code>’s (explained in the <a class="reference external" href="https://chipdelmal.github.io/MGSurvE/build/html/GA_discrete.html">“GA Discrete Optimization” tutorial</a>).
In this case, we know we want two traps to be located in the northernmost and southernmost islands of the main body of land (which correspond to the indices 24 and 212 of our sites):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining the indices of our fixed traps</span>
<span class="n">SAO_FIXED</span> <span class="o">=</span> <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="mi">212</span><span class="p">]</span>
<span class="k">if</span> <span class="n">FXD_TRPS</span><span class="p">:</span>
    <span class="n">initFxd</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">TRPS_NUM</span><span class="o">-</span><span class="n">FXD_NUM</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">FXD_NUM</span><span class="p">)</span>
<span class="n">sid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">TRPS_NUM</span><span class="o">-</span><span class="n">FXD_NUM</span><span class="p">)</span> <span class="o">+</span> <span class="n">SAO_FIXED</span>
<span class="c1"># Generating our traps dataframe</span>
<span class="n">traps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;sid&#39;</span><span class="p">:</span> <span class="n">sid</span><span class="p">,</span>
    <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="n">initLon</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="n">initLat</span><span class="p">,</span>
    <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="n">initTyp</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="n">initFxd</span>
<span class="p">})</span>
</pre></div>
</div>
<p>With this in place, we generate our landscape object as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lnd</span> <span class="o">=</span> <span class="n">srv</span><span class="o">.</span><span class="n">Landscape</span><span class="p">(</span>
    <span class="n">SAO_TOME_LL</span><span class="p">,</span>
    <span class="n">migrationMatrix</span><span class="o">=</span><span class="n">SAO_TOME_MIG</span><span class="p">,</span>
    <span class="n">traps</span><span class="o">=</span><span class="n">traps</span><span class="p">,</span> <span class="n">trapsKernels</span><span class="o">=</span><span class="n">tKer</span><span class="p">,</span>
    <span class="n">landLimits</span><span class="o">=</span><span class="n">SAO_LIMITS</span><span class="p">,</span>
    <span class="n">trapsRadii</span><span class="o">=</span><span class="p">[</span><span class="mf">.75</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mf">.3</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="setting-ga-up">
<h2><span class="section-number">13.2. </span>Setting GA Up<a class="headerlink" href="#setting-ga-up" title="Permalink to this heading"></a></h2>
<p>Similar to our <a class="reference external" href="https://chipdelmal.github.io/MGSurvE/build/html/GA_discrete.html">previous tutorial</a>, we change the registered functions on our GA for their discrete versions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Chromosome initializer</span>
<span class="n">toolbox</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
    <span class="s2">&quot;initChromosome&quot;</span><span class="p">,</span> <span class="n">srv</span><span class="o">.</span><span class="n">initDiscreteChromosome</span><span class="p">,</span>
    <span class="n">ptsIds</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">pointID</span><span class="p">,</span>
    <span class="n">fixedTraps</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">trapsFixed</span><span class="p">,</span>
    <span class="n">trapsSiteID</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">trapsSiteID</span><span class="p">,</span>
    <span class="n">banSites</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">pointsTrapBanned</span>
<span class="p">)</span>
<span class="c1"># Mating operator</span>
<span class="n">toolbox</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
    <span class="s2">&quot;mate&quot;</span><span class="p">,</span> <span class="n">srv</span><span class="o">.</span><span class="n">cxDiscreteUniform</span><span class="p">,</span>
    <span class="n">fixedTraps</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">trapsFixed</span><span class="p">,</span>
    <span class="n">indpb</span><span class="o">=</span><span class="n">MAT</span><span class="p">[</span><span class="s1">&#39;indpb&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="c1"># Mutation operator</span>
<span class="n">toolbox</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
    <span class="s2">&quot;mutate&quot;</span><span class="p">,</span> <span class="n">srv</span><span class="o">.</span><span class="n">mutateDiscreteChromosome</span><span class="p">,</span>
    <span class="n">ptsIds</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">pointID</span><span class="p">,</span>
    <span class="n">fixedTraps</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">trapsFixed</span><span class="p">,</span>
    <span class="n">indpb</span><span class="o">=</span><span class="n">MUT</span><span class="p">[</span><span class="s1">&#39;indpb&#39;</span><span class="p">],</span>
    <span class="n">banSites</span><span class="o">=</span><span class="n">lndGA</span><span class="o">.</span><span class="n">pointsTrapBanned</span>
<span class="p">)</span>
<span class="c1"># Chromosome evaluation function</span>
<span class="n">toolbox</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
    <span class="s2">&quot;evaluate&quot;</span><span class="p">,</span> <span class="n">srv</span><span class="o">.</span><span class="n">calcDiscreteFitness</span><span class="p">,</span>
    <span class="n">landscape</span><span class="o">=</span><span class="n">lndGA</span><span class="p">,</span>
    <span class="n">optimFunction</span><span class="o">=</span><span class="n">srv</span><span class="o">.</span><span class="n">getDaysTillTrappedPseudoInverse</span><span class="p">,</span>
    <span class="n">optimFunctionArgs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;outer&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="s1">&#39;inner&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For more information on these operators, have a look at their <a class="reference external" href="https://chipdelmal.github.io/MGSurvE/build/html/generated/MGSurvE.optimization.html#module-MGSurvE.optimization">API</a> entries.</p>
</section>
<section id="result">
<h2><span class="section-number">13.3. </span>Result<a class="headerlink" href="#result" title="Permalink to this heading"></a></h2>
<a class="reference internal image-reference" href="_images/STP_DO_FXD_10_TRP.jpg"><img alt="_images/STP_DO_FXD_10_TRP.jpg" class="align-center" src="_images/STP_DO_FXD_10_TRP.jpg" style="width: 100%;" /></a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="GA_discrete.html" class="btn btn-neutral float-left" title="12. GA Discrete Optimization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="TrapsKernels.html" class="btn btn-neutral float-right" title="Visualizing Traps’ Kernels" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Hector M. Sanchez C..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>